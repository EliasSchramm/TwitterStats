<!doctype html>

<html lang="de">

  <head>
    <meta charset="utf-8"/>
    <title>Twitter Stats</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="test.css">
  </head>
  <body>

    <svg id="modern_line">
        <polyline id="modern_line_l1" points="" stroke="url(#linear)" style="stroke-width:3" fill-opacity="0"/>
        <linearGradient id="linear" gradientTransform="rotate(90)">
           <stop id="stop1" offset="0%" stop-color="#fff"  />
           <stop id="stop2" offset="100%" stop-color="#fff"/>
        </linearGradient>
        Sorry, your browser does not support inline SVG.
      </svg>


      <h1>Twitter-Stats</h1>
      <hr>
      <p>Here you can see the most used hashtags, tags and emoji of the last 60 Minutes.</p>
      <h2>How does it work?</h2>
      <p>The twitter-api has an feature called "Sampled Stream". That means that you get a small live portion of, if you can trust the <a href="https://developer.twitter.com/en/docs/twitter-api/tweets/sampled-stream/api-reference/get-tweets-sample-stream">documentation</a>,
         ca. 1% of all tweets pushed to twitter. <br>
       This is the reason why you can multiply all numbers on this page by 100 to get circa the real usages. A script, that runs on a Raspberry Pi 4, processes all information it gets and looks for hashtags, tags and emoji.
     These informations then replace placeholders on the website you are on now.</p>
     <h2>Overall Stats</h2>
     <p>This script ran since $upTime$ hours without a crash. In this time it processed $num_tweets$ tweets. $num_re_tweets$ of them where retweets. It found $num_hashtags$ hashtags, $num_tag$ tags and $num_emoji$ emoji.</p>
     <h2>The last processed tweet</h2>

     <h3>" $lastTweet$ "</h3>

    <h2>Top 50 Hashtags</h2>
    <p class="tweets">
      $topHashtags$
    </p>

    <h2 >Top 50 Tags</h2>
    <p class="tweets">
      $topTag$
    </p>

    <h2>Top 50 Emoji</h2>
    <p class="tweets">
      $topEmoji$
    </p>

    <hr>

    <p>Programmed and Designed by <a href="https://eps-dev.de">EPS-DEV</a> </p>

    <script type="text/javascript">
  let svg_line_l1 = document.getElementById('modern_line_l1');
  let svg_line = document.getElementById('modern_line');

  generateSVGline(svg_line_l1);

  function generateSVGline(svg) {
    let points = "20,0";
    let height = 0;
    let width = 20;

    let temp_bool = true;
    let random = 0;
    svg_line.setAttribute("height" , document.body.clientHeight);
    while(height < document.body.clientHeight){
      random = getRandomInt(100, 200);
      height += random;

      if(temp_bool){
        height -= random/2;

        random = getRandomInt(-120, 120)

        if(between(random, -80,80) ){
            if(random <= 0){
              random = -80;

            }
            if(random > 0){
              random = 80;
            }
        }

        width += random;

        if(width > 250){
          width = 250;
          width -= random;
        }
        if(width < 20){
          width = 20;
          width -= random;
        }


        temp_bool = !temp_bool;
      }else{
        temp_bool = !temp_bool;
      }


      points += " "+width+","+height;


    }
    svg.setAttribute("points", points);

  }

  function getRandomInt(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function between(x, min, max) {
    return x >= min && x <= max;
  }

  generateSVGline(svg_line_l1);
</script>
  </body>
</html>
